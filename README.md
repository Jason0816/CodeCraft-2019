# CodeCraft-2019
华为软件精英挑战赛初赛&amp;复赛

## 京津东北赛区-HITandRun
初赛成绩2635
复赛成绩5716

## 初赛思路
初赛的思路比较简单：

###  计算车辆从起点到终点的最短路径
1. 计算路径我们选用了最经典的Dijkstra算法，选用这个算法的一个主要原因是：Dijkstra能够计算某个节点到所有其他节点的最短路径，这样，我们只用运行n(n为地图节点的个数)次Dijstra便可以算出所有节点之间的最短路径
2. Dijkstra算法中节点到节点之间的权重我们选取了：
    ```
    weight = road_length / (0.6 * min_speed + 0.4 * channel) / 10 / NORMAL
    ```
    其中`weight`越小，选择这条道路的概率也就越大，`0.6`和`0.4`是试出来的，`NORMAL`是一个`1`附近的数值，当道路限速和车辆速度相等时，`NORMAL=1`，当道路速度与车辆速度不相等时，随着两者数值的差距，`NORMAL`逐渐增大
3. 权重调整：在计算出车辆的路径之后，我们将该车通行的所有道路的权重进行增加，使后面的车经过该路径的几率见效，不过权重调整是在宏观上进行调整的
4. 在安排发车时间方面，我们按照`cost，plantime`将所有车辆进行了多级排序
    + cost: 通过Dijkstra计算出车辆行驶路径，并计算出车辆选择此道路的理论行驶时间（不考虑拥堵），cost越小，车辆实际出发时间越早
    + plantime: 计划出发时间越早，车辆实际出发时间越早

## 复赛思路

### 整体思路
复赛我们沿用了初赛思想，我们将预置车辆走过的道路的权值都更新一遍，某条道路走的越多，权重增加的也越多，然后发车顺序以`priority`进行优先排序，并且在有预置车辆的时候，发车数量较少，没有预置车辆的时候，发车数量较多。

### 复赛踩坑
1. 复赛花了很长时间来写判题器，并且选定的C++，刚写完挑了两天的**段错误**，在去北京现场的动车上，才修复了所有bug，结果和官网给定的测试集结果一致。
2. 由于初赛用的Python，所以判题器和调度无法同时运行(比赛结束后，现场采访时有队伍采用了两种语言混合的方式！！！)，到北京后移植了一天，将Python移植到C++，结果一直有bug，而且有些bug真的是无法言说，到比赛前也没有debug完，只好放弃，比赛现场继续调参 T_T
3. 复赛开始时，判题结果和官网一致，可到后面发现，本地判题能够跑通，官网出现死锁，现在也没想到bug出现在哪 T_T

通过本次华为软件精英挑战赛，自己学到了很多东西，也认清了自己与别人的差距，所以还是要学习！
